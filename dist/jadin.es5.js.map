{"version":3,"file":"jadin.es5.js","sources":["../src/Event.ts","../src/MidiReader.ts","../src/Note.ts","../src/Track.ts","../src/Cursor.ts","../src/Midi.ts"],"sourcesContent":["import Track from './Track';\nimport Note from './Note';\nimport Midi from './Midi';\n\nexport default class Event {\n  track?: Track;\n  type?: string|number;\n  subtype?: any;\n  text?: string|number;\n  port?: number;\n  data?: string;\n  tick?: number;\n  deltaTime?: number;\n  note?: Note;\n  number?: number;\n  tempo?: number;\n  frameRate?: number;\n  hours?: number;\n  minutes?: number;\n  seconds?: number;\n  frames?: number;\n  subframes?: number;\n  numerator?: number;\n  denominator?: number;\n  metronome?: number;\n  thirtySeconds?: number;\n  key?: number;\n  scale?: number;\n  velocity?: number;\n  channel?: number;\n  pressure?: number;\n  controller?: number;\n  value?: number;\n  program?: number;\n\n  constructor(){}\n\n  get midi(): Midi|null {\n    return this.track!.midi;\n  }\n\n  get second(): number|null {\n    return this.midi!.tickToSecond(this.tick!);\n  }\n}\n","import Event from './Event';\n\nexport default class MidiReader {\n  data: string;\n  position: number;\n  lastStatusByte!: number;\n\n  constructor(data: string) {\n    this.data = data;\n    this.position = 0;\n  }\n\n  read(length: number) {\n    const result = this.data.substr(this.position, length);\n    this.position += length;\n    return result;\n  }\n\n  readInt(numberOfBytes: number) {\n    let result = 0;\n\n    while(numberOfBytes > 0){\n      result <<= 8;\n      result += this.data.charCodeAt(this.position);\n      this.position += 1;\n      numberOfBytes -= 1;\n    }\n\n    return result;\n  }\n\n  readVLQ() {\n    let result = 0;\n    let octet;\n\n    do {\n      result <<= 7;\n      octet = this.readInt(1);\n      result += (octet & 0x7f);\n    } while (octet & 0x80)\n\n    return result;\n  }\n\n  readEvent() {\n    let event = new Event();\n    event.deltaTime = this.readVLQ();\n\n    const firstByte = this.readInt(1);\n    if(firstByte == 0xff){\n      event.type = 'meta';\n      const subtypeByte = this.readInt(1);\n      const length = this.readVLQ();\n      switch(subtypeByte){\n        case 0x00:\n          event.subtype = 'sequenceNumber';\n          if (length != 2) throw \"Length for this sequenceNumber event was \" + length + \", but must be 2\";\n          event.number = this.readInt(2);\n          return event;\n        case 0x01:\n          event.subtype = 'text';\n          event.text = this.read(length);\n          return event;\n        case 0x02:\n          event.subtype = 'copyright';\n          event.text = this.read(length);\n          return event;\n        case 0x03:\n          event.subtype = 'trackName';\n          event.text = this.read(length);\n          return event;\n        case 0x04:\n          event.subtype = 'instrumentName';\n          event.text = this.read(length);\n          return event;\n        case 0x05:\n          event.subtype = 'lyric';\n          event.text = this.read(length);\n          return event;\n        case 0x06:\n          event.subtype = 'marker';\n          event.text = this.read(length);\n          return event;\n        case 0x07:\n          event.subtype = 'cuePoint';\n          event.text = this.read(length);\n          return event;\n        case 0x08:\n          event.subtype = 'programName';\n          event.text = this.read(length);\n          return event;\n        case 0x09:\n          event.subtype = 'deviceName';\n          event.text = this.read(length);\n          return event;\n        case 0x20:\n          event.subtype = 'channelPrefix';\n          event.text = this.readInt(1);\n          if (length != 1) throw \"Length for this midiChannelPrefix event was \" + length + \", but must be 1\";\n          return event;\n        case 0x21:\n          event.subtype = 'port';\n          event.port = this.readInt(1);\n          if (length != 1) throw \"Length for this port event was \" + length + \", but must be 1\";\n          return event;\n        case 0x2f:\n          event.subtype = 'endOfTrack';\n          if (length != 0) throw \"Length for this endOfTrack event was \" + length + \", but must be 0\";\n          return event;\n        case 0x51:\n          event.subtype = 'setTempo';\n          if (length != 3) throw \"Length for this setTempo event was \" + length + \", but must be 3\";\n          event.tempo = this.readInt(3);\n          return event;\n        case 0x54:\n          event.subtype = 'smpteOffset';\n          if (length != 5) throw \"Length for this smpteOffset event was \" + length + \", but must be 5\";\n          const hourByte = this.readInt(1);\n          event.frameRate = ({0: 24, 1: 25, 2: 29.97, 3: 30} as any)[hourByte >> 6];\n          event.hours = hourByte & 0x1f;\n          event.minutes = this.readInt(1);\n          event.seconds = this.readInt(1);\n          event.frames = this.readInt(1);\n          event.subframes = this.readInt(1);\n          return event;\n        case 0x58:\n          event.subtype = 'timeSignature';\n          if (length != 4) throw \"Length for this timeSignature event was \" + length + \", but must be 4\";\n          event.numerator = this.readInt(1);\n          event.denominator = Math.pow(2, this.readInt(1));\n          event.metronome = this.readInt(1);\n          event.thirtySeconds = this.readInt(1);\n          return event;\n        case 0x59:\n          event.subtype = 'keySignature';\n          if (length != 2) throw \"Length for this keySignature event was \" + length + \", but must be 2\";\n          event.key = this.readInt(1);\n          if (event.key > 127) event.key = 128 - event.key;\n          event.scale = ({0: 'major', 1: 'minor'} as any)[this.readInt(1)];\n          return event;\n        case 0x7f:\n          event.subtype = 'sequencerSpecific';\n          event.data = this.read(length);\n          return event;\n      }\n    } else if(firstByte == 0xf0) {\n      event.type = 'sysEx';\n      const length = this.readVLQ();\n      event.data = this.read(length);\n      return event;\n    } else {\n      event.type = 'channel';\n      let statusByte, dataByte1;\n      if(firstByte < 0x80){ // running status; first byte is the first data byte\n        dataByte1 = firstByte;\n        statusByte = this.lastStatusByte; \n      } else { // new status; first byte is the status byte\n        dataByte1 = this.readInt(1);\n        statusByte = firstByte;\n        this.lastStatusByte = statusByte;\n      }\n\n      event.channel = statusByte & 0x0f;\n      const eventSubtype = statusByte >> 4;\n      switch(eventSubtype) {\n        case 0x8:\n          event.subtype = 'noteOff';\n          event.number = dataByte1;\n          event.velocity = this.readInt(1);\n          return event;\n        case 0x9:\n          event.number = dataByte1;\n          event.velocity = this.readInt(1);\n          event.subtype = (event.velocity==0 ? 'noteOff' : 'noteOn')\n          return event;\n        case 0xa:\n          event.subtype = 'aftertouch';\n          event.number = dataByte1;\n          event.pressure = this.readInt(1);\n          return event;\n        case 0xb:\n          event.subtype = 'controller';\n          event.controller = dataByte1;\n          event.value = this.readInt(1);\n          return event;\n        case 0xc:\n          event.subtype = 'program';\n          event.program = dataByte1;\n          return event;\n        case 0xd:\n          event.subtype = 'channelPressure';\n          event.pressure = dataByte1;\n          return event;\n        case 0xe:\n          event.subtype = 'pitchBend';\n          event.value = (this.readInt(1) << 7) + dataByte1\n          return event;\n      }    \n    }\n  }\n\n  readChunk(){\n    const type = this.read(4);\n    const length = this.readInt(4);\n    const data = this.read(length);\n\n    return {\n      type: type,\n      length: length,\n      data: data,\n    };\n  };\n\n  isAtEndOfFile(){\n    return this.position >= this.data.length;\n  };\n}\n","import Event from './Event';\nimport Track from './Track';\n\nexport default class Note {\n  onEvent: Event;\n  offEvent: Event;\n  track!: Track;\n\n  constructor(onEvent = new Event(), offEvent = new Event()) {\n    this.onEvent = onEvent;\n    this.offEvent = offEvent;\n    onEvent.note = this;\n    offEvent.note = this;\n  }\n\n  get onTick() {\n    return this.onEvent.tick;\n  }\n\n  set onTick(value) {\n    if (value! >= this.offTick) throw \"Cannot set onTick to be greater than or equal to offTick\"\n    this.onEvent.tick = value;\n  }\n\n  get offTick() {\n    return this.offEvent.tick!;\n  }\n\n  set offTick(value: number) {\n    if (value <= this.onTick!) throw \"Cannot set offTick to be less than or equal to onTick\"\n    this.offEvent.tick = value;\n  }\n\n  get midi() {\n    return this.track.midi; \n  }\n\n  get number() {\n    return this.onEvent.number;\n  }\n\n  set number(value) {\n    this.onEvent.number = value;\n    this.offEvent.number = value;\n  }\n\n  get onSecond() {\n    return this.onEvent.second;\n  }\n\n  get offSecond() {\n    return this.offEvent.second;\n  }\n\n  get duration() {\n    return this.offSecond! - this.onSecond!;  \n  }\n\n  onAt(second: number) {\n    return this.onSecond! <= second && second <= this.offSecond!;\n  }\n\n  onDuring(onSecond: number, offSecond: number) {\n    return this.onSecond! <= offSecond && this.offSecond! >= onSecond;  \n  }\n}\n","import MidiReader from './MidiReader';\nimport Note from './Note';\nimport Event from './Event';\nimport Midi from './Midi';\n\nexport default class Track {\n  events: Event[];\n  notes: Note[];\n  _noteOnEvents: {[key: number]: Event};\n  midi!: Midi;\n\n  constructor(data='') {\n    this.events = [];\n    this.notes = [];\n    this._noteOnEvents = {}\n\n    let reader = new MidiReader(data);\n    let currentTick = 0;\n    while (!reader.isAtEndOfFile()) {\n      const event = reader.readEvent()!;\n      currentTick += event.deltaTime!;\n      event!.tick  = currentTick;\n      this.addEvent(event);\n    }\n    // remove unpaired noteOn events\n    for(const number in this._noteOnEvents){\n      this.removeEvent(this._noteOnEvents[number]);\n    }\n  }\n\n  addEvent(event: Event){\n    event.track = this;\n    this.events.push(event);\n    switch(event.subtype){\n      case 'noteOn':\n        const invalidEvent = this._noteOnEvents[event.number!];\n        if(!!invalidEvent){ // previous noteOn event was invalid\n          this.removeEvent(invalidEvent);\n        }\n        this._noteOnEvents[event.number!] = event;\n        break;\n      case 'noteOff':\n        const noteOnEvent = this._noteOnEvents[event.number!];\n        if(!noteOnEvent || noteOnEvent.tick! >= event.tick!){\n          // this noteOff event is invalid - needs corresponding preceding noteOn event\n          this.removeEvent(event);\n        } else {\n          const note = new Note(noteOnEvent, event);\n          note.track = this;\n          this.notes.push(note);\n          delete this._noteOnEvents[event.number!];\n        }\n        break;\n    }\n  }\n\n  removeEvent(event: Event){\n    const index = this.events.lastIndexOf(event); // index will typically be near the end of the array\n    this.events.splice(index, 1)\n  }\n\n  get index() {\n    return this.midi.tracks.indexOf(this);\n  }\n\n  notesOnAt(second: number) {\n    return this.notes.filter(function(note){\n      return note.onAt(second);\n    });\n  }\n\n  notesOnDuring(onSecond: number, offSecond: number) {\n    return this.notes.filter(function(note){\n      return note.onDuring(onSecond, offSecond);\n    });\n  }\n}\n","import Event from './Event';\n\ninterface Callback {\n  (event: Event):  void;\n}\n\nexport default class Cursor {\n  events: Event[];\n  index: number;\n  second: number;\n\n  constructor(events: Event[]){\n    this.events = events;\n    this.index = 0;\n    this.second = 0;\n  }\n\n  get nextEvent(){\n    return this.events[this.index];\n  }\n\n  get previousEvent(){\n    return this.events[this.index-1];\n  }\n\n  forward(second: number, callbacks: {[key: string]: Callback} = {}){\n    this.second = second;\n\n    while(!!this.nextEvent && this.nextEvent.second! <= second){\n      if(!!callbacks[this.nextEvent.subtype!]){\n        callbacks[this.nextEvent.subtype](this.nextEvent);\n      }\n\n      this.index++;\n    }\n  }\n\n  backward(second: number, callbacks: {[key: string]: Callback} = {}){\n    this.second = second;\n\n    while(!!this.previousEvent && this.previousEvent.second! > second){\n      if(!!callbacks[this.previousEvent.subtype]){\n        callbacks[this.previousEvent.subtype](this.previousEvent);\n      }\n\n      this.index--;\n    }    \n  }\n}\n","import MidiReader from './MidiReader';\nimport Track from './Track';\nimport Cursor from './Cursor';\nimport Event from './Event';\nimport { Note } from './jadin';\n\nexport default class Midi {\n  format = 0;\n  ppqn = 480;\n  tracks: Track[] = [];\n  private _tickToSecond: {[key: number]: number} = {};\n  private _tempoEvents: Event[] = [];\n\n  constructor(data?: string) {\n    if(!!data){\n      const reader = new MidiReader(data);\n\n      const headerChunk = reader.readChunk();\n      const headerReader = new MidiReader(headerChunk.data);\n      this.format = headerReader.readInt(2);\n      if(this.format == 2) throw \"MIDI format 2 not supported\";\n      const numberOfTracks = headerReader.readInt(2);\n      this.ppqn = headerReader.readInt(2); // assumes metrical timing\n\n      for (let i = 0; i < numberOfTracks; i++) {\n        const trackChunk = reader.readChunk();\n        this.createTrack(trackChunk.data);\n      }\n    } else {\n      const tempoTrack = this.createTrack();\n    }\n  }\n\n  createTrack(data?: string) {\n    const track = new Track(data);\n    track.midi = this;\n    this.tracks.push(track);\n    return track;\n  }\n\n  newCursor() {\n    return new Cursor(this.events.sort(function(e1,e2){return e1.tick! - e2.tick!}));\n  }\n\n  get notes() {\n    return this.tracks\n      .map(function(track){return track.notes})\n      .reduce(function(a,b){return a.concat(b)});\n  }\n\n  get events() {\n    return this.tracks\n      .map(function(track){return track.events})\n      .reduce(function(a,b){return a.concat(b)});\n      //.sort(function(e1,e2){return e1.tick < e2.tick});\n  }\n\n  get tempoEvents() {\n    if(this._tempoEvents.length > 0) return this._tempoEvents; // return if memoized\n\n    // format 0: All events are on the zeroth track, including tempo events\n    // format 1: All tempo events are on the zeroth track\n    // format 2: Every track has tempo events (not supported)\n    return this._tempoEvents = this.tracks[0].events.filter(function(event){\n      return event.subtype == 'setTempo';\n    })\n  }\n\n  get duration() {\n    return this.notes\n      .map(function(note){return note.offSecond})\n      .reduce(function(a,b){return Math.max(a!, b!)}, 0)\n  }\n\n  tickToSecond(tick: number) {\n    if(this._tickToSecond[tick]) return this._tickToSecond[tick]\n\n    var currentTick = 0;\n    var currentTempo = 500000;\n    var totalTime = 0;\n    for (var i = 0; i < this.tempoEvents.length; i++) {\n      var event = this.tempoEvents[i];\n      if(event.tick! >= tick) break;\n      totalTime += ((event.tick! - currentTick) / this.ppqn) * currentTempo / 1000000.0;\n      currentTick = event.tick!;\n      currentTempo = event.tempo!;\n    }\n\n    totalTime += ((tick - currentTick) / this.ppqn) * currentTempo / 1000000.0;\n    return this._tickToSecond[tick] = totalTime;\n  }\n\n  notesOnAt(second: number): Note[] {\n    return this.tracks.map(track => track.notesOnAt(second)).flat();\n  }\n\n  notesOnDuring(onSecond: number, offSecond: number): Note[] {\n    return this.tracks.map(track => track.notesOnDuring(onSecond, offSecond)).flat();\n  }\n}\n"],"names":[],"mappings":"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"}